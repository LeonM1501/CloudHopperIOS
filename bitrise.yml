---
format_version: '13'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: ios
app:
  envs: []
workflows:
  run_tests:
    description: Build the Unity iOS app
    steps:
      - activate-ssh-key@4: {}
      - git-clone@8: {}
      - restore-cocoapods-cache@2: {}
      - restore-spm-cache@2: {}
      - cocoapods-install@2: {}
      - xcode-build@3:
          inputs:
            - project_path: Unity-iPhone.xcodeproj
            - scheme: Unity-iPhone
            - action: archive
            - disable_index_while_building: 'true'
            - log_formatter: xcpretty
            - xcodebuild_options: 'CODE_SIGNING_ALLOWED=NO'
      - save-cocoapods-cache@2: {}
      - save-spm-cache@2: {}
      - deploy-to-bitrise-io@2: {}
  build_for_testing:
    description: Build the Unity iOS app for testing
    steps:
      - activate-ssh-key@4: {}
      - git-clone@8: {}
      - restore-cocoapods-cache@2: {}
      - restore-spm-cache@2: {}
      - cocoapods-install@2: {}
      - xcode-build-for-test@3:
          inputs:
            - project_path: Unity-iPhone.xcodeproj
            - scheme: Unity-iPhone
            - configuration: Debug
            - destination: generic/platform=iOS
            - log_formatter: xcpretty
            - xcodebuild_options: 'CODE_SIGNING_ALLOWED=NO'
      - save-cocoapods-cache@2: {}
      - save-spm-cache@2: {}
      - deploy-to-bitrise-io@2: {}
