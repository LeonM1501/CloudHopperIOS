---
format_version: '13'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: ios
app:
  envs: []
workflows:
  run_tests:
    description: Build the Unity iOS app for simulator
    steps:
      - activate-ssh-key@4: {}
      - git-clone@8: {}
      - restore-cocoapods-cache@2: {}
      - restore-spm-cache@2: {}
      - cocoapods-install@2: {}
      - xcode-build-for-simulator@2:
          inputs:
            - project_path: Unity-iPhone.xcodeproj
            - scheme: Unity-iPhone
            - disable_index_while_building: 'true'
            - log_formatter: xcpretty
          outputs:
            - BITRISE_APP_DIR_PATH
            - BITRISE_XCODE_BUILD_RAW_RESULT_TEXT_PATH
      - save-cocoapods-cache@2: {}
      - save-spm-cache@2: {}
      - deploy-to-bitrise-io@2: {}
  build_for_testing:
    description: Build the Unity iOS app for testing
    steps:
      - activate-ssh-key@4: {}
      - git-clone@8: {}
      - restore-cocoapods-cache@2: {}
      - restore-spm-cache@2: {}
      - cocoapods-install@2: {}
      - xcode-build-for-test@3:
          inputs:
            - project_path: Unity-iPhone.xcodeproj
            - scheme: Unity-iPhone
            - configuration: Debug
            - destination: generic/platform=iOS Simulator
            - log_formatter: xcpretty
      - save-cocoapods-cache@2: {}
      - save-spm-cache@2: {}
      - deploy-to-bitrise-io@2: {}
